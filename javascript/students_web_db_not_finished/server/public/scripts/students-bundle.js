/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./javascript/students.js":
/*!********************************!*\
  !*** ./javascript/students.js ***!
  \********************************/
/***/ (() => {

eval("const displayMessage = msg => document.getElementById('content').textContent = msg; \n\nconsole.log(\"student script laoded\");\n\nconst fetchStudents =\n    async () => {\n        console.log('fetching students');\n        try {\n            removeStudents();\n            const studentTable = document.getElementById('studentList'); \n            const response = await fetch('/students', {method : 'GET'}); \n            const allStudents = await response.json(); \n            removeStudents();\n            allStudents.forEach(student => studentTable.appendChild(buildOneElement(student)));\n        } catch (error) {\n            displayMessage(error.message); \n            console.error('fetch students error', error);\n        }   \n    }\n\nconst removeStudents = \n    () => {\n        const element = document.getElementById(\"studentList\");\n        while (element.firstChild) {\n            element.removeChild(element.firstChild);\n        }\n    }\n\nconst buildOneElement = \n    student => {\n        const studentElement = document.createElement('tr'); \n        studentElement.className = 'student';\n        studentElement.appendChild(buildBox(student.surname, 'name'));\n        studentElement.appendChild(buildBox(student.firstnames, 'firstnames'));\n        studentElement.appendChild(buildBox(student.ine, 'ine'));\n        return studentElement; \n    }\n\nconst buildBox = \n    (content,className) => {\n        const tdElement = document.createElement('td'); \n        tdElement.textContent = content; \n        tdElement.className = className; \n        return tdElement; \n    }\n\nconst createStudent = \n    async () => {\n        const ine = document.getElementById(\"number\").value.trim(); \n        const firstnames = document.getElementById(\"firstnames\").value.split(\",\").map(name=>name.trim())\n        const surname = document.getElementById(\"surname\").value.trim();\n\n        if (!surname) {\n            displayMessage(\"surname's mandatory\"); \n            return;\n        }\n\n        try {\n            const requestOptions = {\n                method: 'POST',\n                headers: {'Content-Type' : 'application/json'}, \n                body: JSON.stringify({ine,firstnames,surname}),\n            };\n            const response = await fetch('/students',requestOptions); \n\n            if (response.ok) {\n                const responseWithData = await response.json(); \n                displayMessage(`student added => ${responseWithData.firstnames} ${responseWithData.name} with student ID : ${responseWithData.ine}`);\n                fetchStudents();\n            } else {\n                const error = await response.json().catch(()=>null);\n                displayMessage(`Error: ${error?.message || response.statusText || 'Unknown error'}`);\n            }\n        } catch (error) {\n            displayMessage(error.message); \n            console.error('create student error', error);\n        }\n    }\n\nconst setup = () => {\n    console.log(\"setup\")\n    displayMessage(\"PrÃªt\"); \n    fetchStudents();\n    document.getElementById(\"createUpdate\").addEventListener('click', createStudent);\n}\n\nsetup();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9qYXZhc2NyaXB0L3N0dWRlbnRzLmpzIiwibWFwcGluZ3MiOiJBQUFBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCxlQUFlO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsb0NBQW9DO0FBQzlELHNDQUFzQyx1QkFBdUI7QUFDN0Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsbURBQW1ELDZCQUE2QixFQUFFLHVCQUF1QixvQkFBb0IscUJBQXFCO0FBQ2xKO0FBQ0EsY0FBYztBQUNkO0FBQ0EseUNBQXlDLHlEQUF5RDtBQUNsRztBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jbGllbnQvLi9qYXZhc2NyaXB0L3N0dWRlbnRzLmpzPzFkZGYiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZGlzcGxheU1lc3NhZ2UgPSBtc2cgPT4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnQnKS50ZXh0Q29udGVudCA9IG1zZzsgXG5cbmNvbnNvbGUubG9nKFwic3R1ZGVudCBzY3JpcHQgbGFvZGVkXCIpO1xuXG5jb25zdCBmZXRjaFN0dWRlbnRzID1cbiAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdmZXRjaGluZyBzdHVkZW50cycpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVtb3ZlU3R1ZGVudHMoKTtcbiAgICAgICAgICAgIGNvbnN0IHN0dWRlbnRUYWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdHVkZW50TGlzdCcpOyBcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9zdHVkZW50cycsIHttZXRob2QgOiAnR0VUJ30pOyBcbiAgICAgICAgICAgIGNvbnN0IGFsbFN0dWRlbnRzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOyBcbiAgICAgICAgICAgIHJlbW92ZVN0dWRlbnRzKCk7XG4gICAgICAgICAgICBhbGxTdHVkZW50cy5mb3JFYWNoKHN0dWRlbnQgPT4gc3R1ZGVudFRhYmxlLmFwcGVuZENoaWxkKGJ1aWxkT25lRWxlbWVudChzdHVkZW50KSkpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgZGlzcGxheU1lc3NhZ2UoZXJyb3IubWVzc2FnZSk7IFxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignZmV0Y2ggc3R1ZGVudHMgZXJyb3InLCBlcnJvcik7XG4gICAgICAgIH0gICBcbiAgICB9XG5cbmNvbnN0IHJlbW92ZVN0dWRlbnRzID0gXG4gICAgKCkgPT4ge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdHVkZW50TGlzdFwiKTtcbiAgICAgICAgd2hpbGUgKGVsZW1lbnQuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDaGlsZChlbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICB9XG4gICAgfVxuXG5jb25zdCBidWlsZE9uZUVsZW1lbnQgPSBcbiAgICBzdHVkZW50ID0+IHtcbiAgICAgICAgY29uc3Qgc3R1ZGVudEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOyBcbiAgICAgICAgc3R1ZGVudEVsZW1lbnQuY2xhc3NOYW1lID0gJ3N0dWRlbnQnO1xuICAgICAgICBzdHVkZW50RWxlbWVudC5hcHBlbmRDaGlsZChidWlsZEJveChzdHVkZW50LnN1cm5hbWUsICduYW1lJykpO1xuICAgICAgICBzdHVkZW50RWxlbWVudC5hcHBlbmRDaGlsZChidWlsZEJveChzdHVkZW50LmZpcnN0bmFtZXMsICdmaXJzdG5hbWVzJykpO1xuICAgICAgICBzdHVkZW50RWxlbWVudC5hcHBlbmRDaGlsZChidWlsZEJveChzdHVkZW50LmluZSwgJ2luZScpKTtcbiAgICAgICAgcmV0dXJuIHN0dWRlbnRFbGVtZW50OyBcbiAgICB9XG5cbmNvbnN0IGJ1aWxkQm94ID0gXG4gICAgKGNvbnRlbnQsY2xhc3NOYW1lKSA9PiB7XG4gICAgICAgIGNvbnN0IHRkRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7IFxuICAgICAgICB0ZEVsZW1lbnQudGV4dENvbnRlbnQgPSBjb250ZW50OyBcbiAgICAgICAgdGRFbGVtZW50LmNsYXNzTmFtZSA9IGNsYXNzTmFtZTsgXG4gICAgICAgIHJldHVybiB0ZEVsZW1lbnQ7IFxuICAgIH1cblxuY29uc3QgY3JlYXRlU3R1ZGVudCA9IFxuICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgaW5lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJudW1iZXJcIikudmFsdWUudHJpbSgpOyBcbiAgICAgICAgY29uc3QgZmlyc3RuYW1lcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmlyc3RuYW1lc1wiKS52YWx1ZS5zcGxpdChcIixcIikubWFwKG5hbWU9Pm5hbWUudHJpbSgpKVxuICAgICAgICBjb25zdCBzdXJuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdXJuYW1lXCIpLnZhbHVlLnRyaW0oKTtcblxuICAgICAgICBpZiAoIXN1cm5hbWUpIHtcbiAgICAgICAgICAgIGRpc3BsYXlNZXNzYWdlKFwic3VybmFtZSdzIG1hbmRhdG9yeVwiKTsgXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogeydDb250ZW50LVR5cGUnIDogJ2FwcGxpY2F0aW9uL2pzb24nfSwgXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe2luZSxmaXJzdG5hbWVzLHN1cm5hbWV9KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvc3R1ZGVudHMnLHJlcXVlc3RPcHRpb25zKTsgXG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlV2l0aERhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7IFxuICAgICAgICAgICAgICAgIGRpc3BsYXlNZXNzYWdlKGBzdHVkZW50IGFkZGVkID0+ICR7cmVzcG9uc2VXaXRoRGF0YS5maXJzdG5hbWVzfSAke3Jlc3BvbnNlV2l0aERhdGEubmFtZX0gd2l0aCBzdHVkZW50IElEIDogJHtyZXNwb25zZVdpdGhEYXRhLmluZX1gKTtcbiAgICAgICAgICAgICAgICBmZXRjaFN0dWRlbnRzKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpPT5udWxsKTtcbiAgICAgICAgICAgICAgICBkaXNwbGF5TWVzc2FnZShgRXJyb3I6ICR7ZXJyb3I/Lm1lc3NhZ2UgfHwgcmVzcG9uc2Uuc3RhdHVzVGV4dCB8fCAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBkaXNwbGF5TWVzc2FnZShlcnJvci5tZXNzYWdlKTsgXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdjcmVhdGUgc3R1ZGVudCBlcnJvcicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuY29uc3Qgc2V0dXAgPSAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJzZXR1cFwiKVxuICAgIGRpc3BsYXlNZXNzYWdlKFwiUHLDqnRcIik7IFxuICAgIGZldGNoU3R1ZGVudHMoKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNyZWF0ZVVwZGF0ZVwiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNyZWF0ZVN0dWRlbnQpO1xufVxuXG5zZXR1cCgpOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./javascript/students.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./javascript/students.js"]();
/******/ 	
/******/ })()
;